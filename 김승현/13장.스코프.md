# 스코프란

스코프란 유효범위를 말합니다.

```javascript
var test = 0; // 전역변수

function add(x, y) {
  var testTest = 2; // 지역변수로, function 몸체 내부에서만 사용 가능하며 이 유효범위를 스코프라 부름
  console.log(test, testTest);
}

console.log(test, testTest);
```

따라서 스코프란 자바스크립트 엔진이 식별자를 검색할 때 사용하는 규칙이라고 할 수 있습니다.
모든 식별자(변수 이름, 함수 이름, 클래스 이름 등)는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효범위, 즉 스코프가 결정됩니다.

</br>

# 같은 이름의 식별자?

식별자는 어떤 값을 구별해야 하기에 유일해야 합니다. 따라서 식별자인 변수 이름은 중복될 수 없습니다.
하지만 스코프를 통해 식별자인 변수 이름의 충돌을 방지하여 같은 이름의 변수를 사용할 수 있게 합니다.

비슷한 예시: 한개의 폴더 내에 같은 파일명은 불가능하지만, 다른 폴더에 각각 같은 파일명은 가능함.

</br></br>

# 전역, 지역

코드는 가장 바깥 영역(전역)과 함수 몸체 내부(지역)로 구분할 수 있습니다.

</br></br></br>

### Q. 만약 전역변수, 지역변수이름이 같다면 지역스코프 내에서 참조는 어떻게 이루어지는가?

```javascript
var x = "global x";
var y = "global y";

function outer() {
  var z = "outer's local z";

  function inner() {
    var x = "inner's local x";

    console.log(x); // 여기서 참조되는 변수 x는?
  }
}
```

함수 내부에서 선언된 x 변수 외에 이름이 같은 전역 변수 x가 존재할 때, 함수 내부에서 x 변수를 참조하면 전역변수 x를 참조하는 것이 아닌, 함수 내부에서 선언된 x를 참조합니다. 이는 자바스크립트 엔진이 스코프 체인을 통해 참조할 변수를 검색하기 때문입니다.

    스코프 체인?

    (전역 스코프 -> outer 지역 스코프 -> inner 지역 스코프)
    모든 스코프는 하나의 계층적 구조로 연결되며 모든 지역 스코프의 최상위 스코프는 전역 스코프입니다. 계층적으로 연결된 것을 스코프 체인이라고 합니다.

    변수를 참조할 때 JS엔진은 스코프 체인을 통해 변수를 참조하는 코드의 스코프에서 시작하여 상위 스코프 방향으로 이동하며 변수를 검색합니다. 이를 통해 상위 스코프에서 선언된 변수를 하위 스코프에서도 참조할 수 있게 됩니다.

</br></br>

# 함수 레벨 스코프, 블록 레벨 스코프

대부분 프로그래밍 언어는 함수 몸체뿐만 아니라 모든 코드 블록(if, for, while, try/catch)이 지역 스코프를 만듭니다. 이를 블록 레벨 스코프라 합니다.

반면 var 키워드로 선언된 변수는 오로지 함수의 코드 블록만을 지역 스코프로 인정하며 이를 함수 레벨 스코프라고 합니다.

```javascript
var x = 1;

if (true) {
  var x = 10;
}

console.log(x);
```

</br></br>

# 렉시컬 스코프

프로그래밍 언어는 일반적으로 두가지 방식으로 상위 스코프를 결정합니다.

1. 어디에서 호출되었는지에 따라 : 동적 스코프
2. 어디에서 정의되었는지에 따라 : 정적/렉시컬 스코프

자바스크립트는 렉시컬 스코프를 따르므로 함수의 상위 스코프는 언제나 자신이 정의된 스코프입니다.

```javascript
var x = 1;

function foo() {
  var x = 10;
  bar();
}

function bar() {
  console.log(x);
}

foo();
bar();
```
